services:
  nexusrt-app:
    image: nexusrt/nexusrt:latest
    container_name: nexusrt-service
    ports:
      - "4000:4000"
    environment:
      # Phoenix / Server Settings
      - PHX_SERVER=true
      - PHX_HOST=localhost
      - PORT=4000
      - SECRET_KEY_BASE=your_secret_key_at_least_64_chars_long
      - CHECK_ORIGIN=http://localhost:3000,http://localhost:4000
      
      # Database Connection (Individual vars for WalListener)
      - HOSTNAME=172.238.163.16
      - DBUSERNAME=admin
      - PASSWORD=password
      - DATABASE=admin
      - DBPORT=5432
      - SLOT=wal2json_slot2
      
      # Ecto Repo Connection
      - DATABASE_URL=postgres://admin:password@172.238.163.16:5432/admin
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped